<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNNC Connect | å¤–æ•™æ•°å­—å¹³å°åŸå‹</title>
    <!-- 1. å¼•å…¥ Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. è®¾ç½® Inter å­—ä½“ (æœ€ä½³å®è·µ) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* å¼ºåˆ¶ä½¿ç”¨ Inter å­—ä½“ */
        body { font-family: 'Inter', sans-serif; }
        /* æ¨¡æ‹Ÿç§»åŠ¨ç«¯å±å¹•ï¼Œå¹¶å±…ä¸­ */
        #app-root {
            width: 100%;
            max-width: 480px; /* æ¨¡æ‹Ÿæ‰‹æœºæœ€å¤§å®½åº¦ */
            height: 800px; /* æ¨¡æ‹Ÿæ‰‹æœºé«˜åº¦ */
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border: 8px solid #1f2937;
            margin: 20px auto; /* å±…ä¸­ */
            display: flex;
            flex-direction: column;
            position: relative;
        }
        /* éšè—æ»šåŠ¨æ¡ä½†å…è®¸æ»šåŠ¨ */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        /* è‡ªå®šä¹‰åŠ¨ç”» */
        @keyframes slide-in {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-in { animation: slide-in 0.3s ease-out; }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app-root">
        <!-- App å†…å®¹å°†ç”± JavaScript æ¸²æŸ“åˆ°è¿™é‡Œ -->
        <div id="app-content" class="flex-1 overflow-y-auto hide-scrollbar relative"></div>
        <!-- åº•éƒ¨å¯¼èˆªæ  -->
        <div id="app-navbar" class="h-16 bg-white border-t border-gray-200 flex justify-around items-center px-2 z-20"></div>
        <!-- Modal å®¹å™¨ -->
        <div id="app-modal" class="absolute inset-0 z-50 hidden bg-black/50 backdrop-blur-sm items-end justify-center"></div>
        <!-- Toast å®¹å™¨ -->
        <div id="app-toast-container" class="absolute top-12 w-full flex justify-center z-50 pointer-events-none"></div>
    </div>

    <script>
        // --- æ ¸å¿ƒçŠ¶æ€ç®¡ç† ---
        const appState = {
            activeTab: 'explore',
            selectedActivity: null,
            groups: [
                { id: 1, name: "å¾’æ­¥çˆ±å¥½è€… (Hiking Lovers)", members: 124, icon: "â›°ï¸", joined: false },
                { id: 2, name: "èƒ¶ç‰‡æ‘„å½± (Film Photography)", members: 56, icon: "ğŸ“¸", joined: true },
                { id: 3, name: "æ¡Œæ¸¸ä¹‹å¤œ (Board Games)", members: 89, icon: "ğŸ²", joined: false },
                { id: 4, name: "å­¦æœ¯å†™ä½œ (Academic Writing)", members: 210, icon: "âœï¸", joined: false },
                { id: 5, name: "ç‘œä¼½ä¸å†¥æƒ³ (Yoga)", members: 45, icon: "ğŸ§˜", joined: false },
                { id: 6, name: "å®æ³¢æ¢ç´¢è€… (Ningbo Explorers)", members: 102, icon: "ğŸš²", joined: true },
            ],
            languageBuddies: [
                { id: 1, name: "ææ˜ (Li Ming)", role: "å­¦ç”Ÿ (å¤§ä¸‰)", teach: "ä¸­æ–‡ (Mandarin)", learn: "å­¦æœ¯è‹±è¯­", avatar: "bg-blue-200" },
                { id: 2, name: "é™ˆèæ‹‰ (Sarah Chen)", role: "ç ”ç©¶ç”Ÿ", teach: "å®æ³¢è¯", learn: "æ³•è¯­", avatar: "bg-pink-200" },
                { id: 3, name: "ç‹ä¼Ÿ (Wang Wei)", role: "æ•™èŒå·¥", teach: "ä¹¦æ³•", learn: "è‹±å›½æ–‡åŒ–", avatar: "bg-yellow-200" },
            ]
        };

        // --- Mock Data ---
        const activities = [
            { id: 1, title: "UNNC å½©è™¹è·‘ 2024 (Color Run)", date: "å‘¨å…­, 10æœˆ12æ—¥ â€¢ 14:00", location: "ç”°å¾„åœº", type: "ä½“è‚²", imageColor: "bg-blue-500", desc: "åŠ å…¥æˆ‘ä»¬ä¸€å¹´ä¸­æœ€ç²¾å½©çš„è·‘æ­¥æ´»åŠ¨ï¼ç»“è¯†æ–°æœ‹å‹ï¼Œå°½æƒ…æ¬¢ä¹ã€‚" },
            { id: 2, title: "å›½é™…ç¾é£ŸèŠ‚ (Food Festival)", date: "å‘¨äº”, 10æœˆ18æ—¥ â€¢ 11:30", location: "ä¸»è¡—", type: "ç¾é£Ÿ", imageColor: "bg-orange-500", desc: "å“å°æ¥è‡ªå­¦ç”Ÿå’Œæ•™èŒå·¥å‡†å¤‡çš„20å¤šä¸ªå›½å®¶çš„ç¾é£Ÿã€‚" },
            { id: 3, title: "å›¾ä¹¦é¦†æ¢ä¹¦ä¼š (Book Exchange)", date: "å‘¨ä¸‰, 10æœˆ23æ—¥ â€¢ 15:00", location: "å›¾ä¹¦é¦†å¤§å…", type: "å­¦æœ¯", imageColor: "bg-emerald-600", desc: "å¸¦ä¸€æœ¬æ—§ä¹¦ï¼Œæ¢ä¸€æœ¬æ–°ä¹¦ã€‚æä¾›å’–å•¡ã€‚" }
        ];

        const workshops = [
            { id: 101, title: "éº»å°†æ–°æ‰‹é€Ÿæˆç­ (Mahjong 101)", time: "æœ¬å‘¨æ—¥, 15:00", level: "æ— éœ€ä¸­æ–‡åŸºç¡€", slots: 4 }
        ];

        const foodGuide = [
            { id: 1, name: "è€ç‹ç«é”… (Hotpot)", type: "å››å·èœ", spicy: 3, englishLevel: 2, dist: "0.5km" },
            { id: 2, name: "å¥¶å¥¶çš„å¨æˆ¿ (Grandma's Kitchen)", type: "å®æ³¢æœ¬åœ°èœ", spicy: 1, englishLevel: 1, dist: "1.2km" },
            { id: 3, name: "è“è‰²é’è›™é…’å§ (Blue Frog Grill)", type: "è¥¿é¤", spicy: 0, englishLevel: 3, dist: "2.0km" }
        ];

        // --- Icon SVGs (æ›¿æ¢ Lucide React) ---
        const icons = {
            Home: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>`,
            Users: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>`,
            MessageCircle: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7.9 20A9 9 0 0 0 20 12h-2.73a3.5 3.5 0 0 1-3.5-3.5V5.91A9 9 0 0 0 7.9 20Z"/></svg>`,
            Calendar: `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>`,
            MapPin: `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>`,
            Globe: `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>`,
            Utensils: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21h18"/><path d="M5.5 17L9 3 12.5 17"/><path d="M16 17L18.5 7L21 17"/></svg>`,
            CheckCircle: `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>`,
            X: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>`
        };
        
        // --- é€šç”¨å‡½æ•° ---

        // æ¸²æŸ“æ˜Ÿæ˜Ÿï¼ˆè‹±è¯­æ°´å¹³æˆ–è¾£åº¦ï¼‰
        const renderStars = (level, total, color, emptyColor) => {
            let html = '';
            for (let i = 1; i <= total; i++) {
                const char = color.includes('red') ? 'ğŸŒ¶ï¸' : 'â˜…';
                const classColor = i <= level ? color : emptyColor;
                html += `<span class="${classColor}">${char}</span>`;
            }
            return html;
        };

        // Toast æç¤º
        const showToast = (message) => {
            const container = document.getElementById('app-toast-container');
            const toast = document.createElement('div');
            
            toast.className = 'bg-gray-800/90 text-white px-4 py-2 rounded-full shadow-lg text-sm flex items-center animate-in fade-in zoom-in duration-200';
            toast.innerHTML = `${icons.CheckCircle} <span class="ml-2">${message}</span>`;
            
            container.innerHTML = '';
            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('animate-out', 'fade-out');
                setTimeout(() => {
                    container.innerHTML = '';
                }, 500);
            }, 2500);
        };

        // --- æ¸²æŸ“å‡½æ•°ï¼šå„Tabå†…å®¹ ---

        function renderExplore() {
            let html = `
                <!-- Header -->
                <div class="px-6 pt-8 pb-4 bg-indigo-900 text-white rounded-b-3xl shadow-lg sticky top-0 z-10">
                    <div class="flex justify-between items-center mb-4">
                        <div>
                            <h1 class="text-2xl font-bold">Good Morning, Mark</h1>
                            <p class="text-indigo-200 text-sm">Ready to explore UNNC?</p>
                        </div>
                        <div class="w-10 h-10 rounded-full bg-indigo-700 flex items-center justify-center border-2 border-indigo-400">
                            <span class="font-bold">M</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2 bg-indigo-800/50 p-2 rounded-lg backdrop-blur-sm inline-flex">
                        <span class="text-xl">â›…</span>
                        <span class="text-sm font-medium">Ningbo, 24Â°C</span>
                    </div>
                </div>

                <!-- Feature 3: Flow Activity Schedule -->
                <div class="px-5 mt-6">
                    <div class="flex justify-between items-center mb-3">
                        <h2 class="font-bold text-gray-800 text-lg">Happening on Campus (æ ¡å›­æ´»åŠ¨)</h2>
                        <span class="text-indigo-600 text-xs font-semibold">View All</span>
                    </div>
                    <div class="flex space-x-4 overflow-x-auto pb-4 hide-scrollbar">
                        ${activities.map(act => `
                            <div 
                                data-id="${act.id}"
                                onclick="showActivityModal(${act.id})"
                                class="min-w-[240px] bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]"
                            >
                                <div class="h-24 ${act.imageColor} relative p-3">
                                    <span class="absolute top-2 right-2 bg-white/90 px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide text-gray-700">
                                        ${act.type}
                                    </span>
                                </div>
                                <div class="p-3">
                                    <h3 class="font-bold text-gray-800 truncate">${act.title}</h3>
                                    <div class="flex items-center text-gray-500 text-xs mt-1">
                                        ${icons.Calendar}
                                        <span class="ml-1">${act.date}</span>
                                    </div>
                                    <div class="flex items-center text-gray-500 text-xs mt-1">
                                        ${icons.MapPin}
                                        <span class="ml-1">${act.location}</span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Feature 4: Culture Workshop Highlight -->
                <div class="px-5 mt-6">
                    <div class="bg-gradient-to-r from-orange-100 to-amber-50 rounded-xl p-4 border border-orange-200 flex items-center justify-between">
                        <div>
                            <div class="flex items-center text-orange-800 font-bold mb-1">
                                ${icons.Globe}
                                <span class="ml-2">Culture Workshop (æ–‡åŒ–å·¥åŠ)</span>
                            </div>
                            <h3 class="font-bold text-gray-900">${workshops[0].title}</h3>
                            <p class="text-xs text-gray-600 mt-1">${workshops[0].time} â€¢ å‰©ä½™ ${workshops[0].slots} ä¸ªåé¢</p>
                            <div class="mt-2 inline-block bg-white text-orange-600 text-[10px] font-bold px-2 py-1 rounded border border-orange-200">
                                ${workshops[0].level}
                            </div>
                        </div>
                        <button onclick="showToast('å·²é¢„çº¦éº»å°†ç­')" class="bg-orange-500 text-white px-3 py-2 rounded-lg text-sm font-bold shadow-sm active:scale-95 transition-transform">
                            Join
                        </button>
                    </div>
                </div>

                <!-- Feature 5: Food Reaccommodation -->
                <div class="px-5 mt-6 pb-20">
                    <h2 class="font-bold text-gray-800 text-lg mb-3">Food & Survival Guide (ç¾é£ŸæŒ‡å—)</h2>
                    <div class="space-y-3">
                        ${foodGuide.map(item => `
                            <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gray-50 rounded-lg flex items-center justify-center text-gray-400">
                                        ${icons.Utensils}
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-sm text-gray-800">${item.name}</h4>
                                        <p class="text-xs text-gray-500">${item.type} â€¢ ${item.dist}</p>
                                    </div>
                                </div>
                                <div class="flex flex-col items-end space-y-1">
                                    <div class="flex text-[10px] bg-gray-100 px-1.5 py-0.5 rounded">
                                        <span class="text-gray-500 mr-1">è¾£åº¦:</span>
                                        <div class="flex">
                                            ${renderStars(item.spicy, 3, 'text-red-500', 'text-gray-300')}
                                        </div>
                                    </div>
                                    <div class="flex text-[10px] bg-indigo-50 px-1.5 py-0.5 rounded">
                                        <span class="text-indigo-800 mr-1">English:</span>
                                        <div class="flex">
                                            ${renderStars(item.englishLevel, 3, 'text-indigo-600', 'text-gray-300')}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            return html;
        }

        function renderCommunity() {
            let html = `
                <div class="space-y-6 pb-20">
                    <div class="px-6 pt-12 pb-4">
                        <h1 class="text-2xl font-bold text-gray-900">Find Your Tribe (å¯»æ‰¾åŒä¼´)</h1>
                        <p class="text-gray-500 text-sm">Connect with people who share your passion.</p>
                        
                        <div class="relative mt-4">
                            <input 
                                type="text" 
                                placeholder="Search hobbies (e.g., Hiking, Chess)" 
                                class="w-full bg-gray-100 rounded-lg py-3 pl-10 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                            />
                            <svg class="absolute left-3 top-3 text-gray-400" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                        </div>
                    </div>

                    <!-- Feature 1: Interest Grouping -->
                    <div class="px-5 grid grid-cols-2 gap-4">
                        ${appState.groups.map(group => `
                            <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center text-center relative">
                                <div class="text-4xl mb-3">${group.icon}</div>
                                <h3 class="font-bold text-gray-800">${group.name}</h3>
                                <p class="text-xs text-gray-500 mb-4">${group.members} members</p>
                                <button 
                                    data-id="${group.id}"
                                    onclick="toggleGroup(event)"
                                    class="w-full py-2 rounded-lg text-xs font-bold transition-colors active:scale-95 ${
                                        group.joined 
                                            ? "bg-indigo-100 text-indigo-700 hover:bg-indigo-200" 
                                            : "bg-indigo-600 text-white hover:bg-indigo-700"
                                    }"
                                >
                                    ${group.joined ? "Joined (å·²åŠ å…¥)" : "Join Group (åŠ å…¥å°ç»„)"}
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            return html;
        }

        function renderLanguage() {
            let html = `
                <div class="space-y-6 pb-20">
                    <div class="px-6 pt-12 pb-4 bg-gradient-to-b from-teal-50 to-white">
                        <h1 class="text-2xl font-bold text-teal-900">Language Corner (è¯­ä¼´æ¡¥æ¢)</h1>
                        <p class="text-teal-700 text-sm">Exchange skills, bridge cultures.</p>
                    </div>

                    <!-- Feature 2: Language Corner -->
                    <div class="px-5 space-y-4">
                        <div class="flex justify-between items-center text-sm font-semibold text-gray-600">
                            <span>Recommended Matches (æ¨èè¯­ä¼´)</span>
                            <span class="text-teal-600">Filter</span>
                        </div>

                        ${appState.languageBuddies.map(buddy => `
                            <div class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
                                <div class="flex items-start space-x-4">
                                    <div class="w-12 h-12 ${buddy.avatar} rounded-full flex items-center justify-center text-xl font-bold">
                                        ${buddy.name.charAt(0)}
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h3 class="font-bold text-gray-800">${buddy.name}</h3>
                                                <p class="text-xs text-gray-500">${buddy.role}</p>
                                            </div>
                                            <button 
                                                onclick="showToast('å·²å‘é€è¯­ä¼´é‚€è¯·ç»™ ${buddy.name}')"
                                                class="bg-teal-50 p-2 rounded-full text-teal-600 hover:bg-teal-100 active:scale-95 transition-transform"
                                            >
                                                ${icons.MessageCircle}
                                            </button>
                                        </div>
                                        
                                        <div class="mt-3 flex space-x-2">
                                            <div class="flex-1 bg-green-50 rounded-lg p-2 text-[10px]">
                                                <span class="block text-green-700 font-bold uppercase mb-1">Teaching (æˆ‘èƒ½æ•™)</span>
                                                <span class="text-gray-700">${buddy.teach}</span>
                                            </div>
                                            <div class="flex-1 bg-blue-50 rounded-lg p-2 text-[10px]">
                                                <span class="block text-blue-700 font-bold uppercase mb-1">Learning (æˆ‘æƒ³å­¦)</span>
                                                <span class="text-gray-700">${buddy.learn}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}

                        <div class="mt-6 p-4 bg-teal-900 rounded-xl text-white text-center">
                            <h3 class="font-bold mb-2">Want to practice now? (æƒ³ç«‹å³ç»ƒä¹ ï¼Ÿ)</h3>
                            <p class="text-xs text-teal-200 mb-3">Visit the English Corner at The Hub, open daily 14:00-16:00.</p>
                            <button class="bg-white text-teal-900 px-4 py-2 rounded-lg text-sm font-bold w-full">
                                Get Directions
                            </button>
                        </div>
                    </div>
                </div>
            `;
            return html;
        }

        // --- äº¤äº’é€»è¾‘ ---

        // åˆ‡æ¢ Tab
        window.setActiveTab = (tabName) => {
            appState.activeTab = tabName;
            renderApp();
        };

        // åˆ‡æ¢å°ç»„åŠ å…¥çŠ¶æ€
        window.toggleGroup = (event) => {
            const button = event.currentTarget;
            const id = parseInt(button.dataset.id);
            const groupIndex = appState.groups.findIndex(g => g.id === id);

            if (groupIndex !== -1) {
                const group = appState.groups[groupIndex];
                group.joined = !group.joined;
                showToast(group.joined ? `Joined ${group.name.split(' ')[0]}` : `Left ${group.name.split(' ')[0]}`);
                renderApp(); // é‡æ–°æ¸²æŸ“ Community é¡µé¢
            }
        };

        // æ˜¾ç¤ºæ´»åŠ¨è¯¦æƒ… Modal
        window.showActivityModal = (id) => {
            const activity = activities.find(a => a.id === id);
            if (!activity) return;

            appState.selectedActivity = activity;
            const modal = document.getElementById('app-modal');
            modal.innerHTML = `
                <div class="bg-white w-full sm:w-10/12 h-[80%] sm:h-auto rounded-t-2xl sm:rounded-2xl overflow-hidden shadow-2xl animate-slide-in">
                    <div class="h-32 ${activity.imageColor} relative">
                        <button 
                            onclick="hideActivityModal()"
                            class="absolute top-4 right-4 bg-black/20 text-white p-1 rounded-full hover:bg-black/40"
                        >
                            ${icons.X}
                        </button>
                    </div>
                    <div class="p-6">
                        <span class="text-xs font-bold text-indigo-600 uppercase tracking-wider">${activity.type}</span>
                        <h2 class="text-2xl font-bold text-gray-900 mt-1 mb-2">${activity.title}</h2>
                        <div class="space-y-3 mb-6">
                            <div class="flex items-center text-gray-600 text-sm">
                                ${icons.Calendar}
                                <span class="ml-3">${activity.date}</span>
                            </div>
                            <div class="flex items-center text-gray-600 text-sm">
                                ${icons.MapPin}
                                <span class="ml-3">${activity.location}</span>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm leading-relaxed mb-6">
                            ${activity.desc}
                        </p>
                        <button 
                            onclick="showToast('å·²æŠ¥å ${activity.title.split('(')[0].trim()}'); hideActivityModal();"
                            class="w-full bg-indigo-900 text-white py-3 rounded-xl font-bold hover:bg-indigo-800 transition-colors"
                        >
                            Register Now (ç«‹å³æŠ¥å)
                        </button>
                    </div>
                </div>
            `;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        };

        // éšè—æ´»åŠ¨è¯¦æƒ… Modal
        window.hideActivityModal = () => {
            const modal = document.getElementById('app-modal');
            modal.classList.remove('flex');
            modal.classList.add('hidden');
            appState.selectedActivity = null;
        };


        // --- ä¸»æ¸²æŸ“å™¨ ---

        function renderNavbar() {
            const navbar = document.getElementById('app-navbar');
            const tabs = [
                { name: 'explore', label: 'Explore (æ¢ç´¢)', icon: icons.Home, color: 'indigo' },
                { name: 'community', label: 'Connect (è¿æ¥)', icon: icons.Users, color: 'indigo' },
                { name: 'language', label: 'Bridge (æ¡¥æ¢)', icon: icons.MessageCircle, color: 'teal' }
            ];

            navbar.innerHTML = tabs.map(tab => {
                const isActive = appState.activeTab === tab.name;
                const activeClasses = isActive 
                    ? `text-${tab.color}-600 -translate-y-1` 
                    : 'text-gray-400';
                const strokeWidth = isActive ? 2.5 : 2;

                // ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™é‡Œç›´æ¥ä¿®æ”¹ SVG å­—ç¬¦ä¸²ä¸­çš„ stroke-width
                const activeIcon = tab.icon.replace(/stroke-width="2"/, `stroke-width="${strokeWidth}"`);

                return `
                    <button 
                        onclick="setActiveTab('${tab.name}')"
                        class="flex flex-col items-center p-2 rounded-xl transition-all active:scale-95 ${activeClasses}"
                    >
                        ${activeIcon}
                        <span class="text-[10px] font-medium mt-1">${tab.label}</span>
                    </button>
                `;
            }).join('');
        }

        function renderApp() {
            const contentDiv = document.getElementById('app-content');
            
            // 1. æ¸²æŸ“å¯¼èˆªæ 
            renderNavbar();

            // 2. æ¸²æŸ“ä¸»å†…å®¹
            let contentHTML = '';
            switch (appState.activeTab) {
                case 'explore':
                    contentHTML = renderExplore();
                    break;
                case 'community':
                    contentHTML = renderCommunity();
                    break;
                case 'language':
                    contentHTML = renderLanguage();
                    break;
            }
            contentDiv.innerHTML = contentHTML;
        }

        // --- åˆå§‹åŒ– ---
        document.addEventListener('DOMContentLoaded', () => {
            renderApp();
        });

    </script>
</body>
</html>